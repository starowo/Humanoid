# Humanoid Bot 快速开始指南 🚀

## Windows 用户（最简单）

### 1️⃣ 首次安装
```
双击运行: install.bat
```
脚本会自动：
- ✅ 创建虚拟环境
- ✅ 安装所有依赖
- ✅ 创建配置文件模板

### 2️⃣ 配置 Bot
打开 `config/config.yaml` 文件，修改以下内容：

```yaml
# 1. 填写你的 Bot Token
token: "你的Bot Token"

# 2. 填写允许使用的身份组 ID
allowed_role_ids:
  - 你的身份组ID

# 3. 填写允许修改的频道 ID
channel_manager:
  allowed_channel_ids:
    - 你要修改的频道ID

# 4. (可选) 配置一键冲水功能 - 填写你的用户 Token
message_cleaner:
  user_token: "你的用户Token"  # 见下方"获取用户 Token"说明
```

### 3️⃣ 启动 Bot
```
双击运行: start.bat
```

完成！🎉

---

## Linux/Mac 用户

### 1️⃣ 赋予执行权限
```bash
chmod +x install.sh start.sh update.sh
```

### 2️⃣ 首次安装
```bash
./install.sh
```

### 3️⃣ 配置 Bot
```bash
nano config/config.yaml
# 或使用你喜欢的编辑器
```

修改内容同上（Windows 部分）

### 4️⃣ 启动 Bot
```bash
./start.sh
```

完成！🎉

---

## 如何获取必要的 ID？

### 获取 Bot Token 🔑
1. 访问 https://discord.com/developers/applications
2. 创建应用（或选择已有应用）
3. 左侧点击 "Bot"
4. 点击 "Reset Token" 或 "Copy" 复制 Token

### 获取身份组 ID 👥
1. 在 Discord 设置中开启"开发者模式"
   - 用户设置 → 高级 → 开发者模式（打开）
2. 右键点击服务器中的身份组
3. 选择"复制 ID"

### 获取频道 ID 💬
1. 确保已开启"开发者模式"
2. 右键点击频道
3. 选择"复制 ID"

### 获取用户 Token 🔑 (一键冲水功能需要)
1. 打开 Discord 网页版或客户端
2. 按 F12 打开开发者工具
3. 切换到 "Network"（网络）标签
4. 在 Discord 中进行任意操作（如发送消息）
5. 在网络请求中找到任意 Discord API 请求
6. 查看请求头（Headers）中的 `Authorization` 字段
7. 复制该值（完整内容）

**⚠️ 重要：**
- User Token 是敏感信息，请勿泄露！
- 不要将 Token 提交到公开的代码仓库
- 建议定期更换 Token

---

## 常用命令（斜杠命令）

### 频道管理命令
| 命令 | 说明 |
|------|------|
| `/改改的名` | 修改频道名称（输入 / 后会有参数提示） |
| `/频道信息` | 查看当前频道信息 |
| `/重载模块` | 重载模块（仅管理员） |

### 一键冲水命令 🚽
| 命令 | 说明 |
|------|------|
| `/一键冲水` | 删除指定用户在指定范围内的所有消息 |
| `/停止冲水` | 停止当前正在运行的冲水任务 |

**一键冲水参数：**
- `用户` - 要删除消息的目标用户（必填）
- `起始消息id` - 从此消息ID开始搜索（可选）
- `频道` - 指定频道（可选，不填则搜索整个服务器）

**功能特点：**
- 🔍 智能搜索，使用 Discord API v9
- 🧵 搜索和删除双线程并行
- 📊 实时显示进度和统计
- 🛡️ 自动跳过帖子首楼
- ⏸️ 可随时中断

**使用方法：**
1. 在频道中输入 `/` 
2. 会自动显示可用的斜杠命令列表
3. 选择命令后，按照提示填写参数
4. 按回车执行

✨ 这是 Discord 原生斜杠命令，有自动完成和智能提示！

---

## 更新依赖包

### Windows
```
双击运行: update.bat
```

### Linux/Mac
```bash
./update.sh
```

---

## 遇到问题？

### Bot 无法启动
- ✅ 检查 Token 是否正确
- ✅ 检查配置文件格式（YAML 格式要正确）
- ✅ 确保 Python 版本 ≥ 3.8

### 命令没反应
- ✅ 检查你是否拥有配置中的身份组
- ✅ 检查频道是否在允许列表中
- ✅ 检查 Bot 是否有必要的权限

### 无法修改频道名称
- ✅ Bot 需要"管理频道"权限
- ✅ Discord 限制：每频道每10分钟最多改2次

### 一键冲水不工作
- ✅ 检查是否配置了 user_token
- ✅ Bot 需要"管理消息"权限
- ✅ 检查是否触发速率限制
- ✅ 确保 user_token 有效（未过期）

---

## 提示 💡

- 📝 配置文件修改后会在2秒内自动生效，无需重启
- 🔥 修改代码后使用 `/重载` 命令即可应用更改
- 🔒 venv 虚拟环境确保不污染系统 Python
- 📦 定期运行 update 脚本保持依赖最新

---

**祝你使用愉快！** ❤️

